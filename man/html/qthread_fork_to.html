<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>qthread_fork(3) manual page</title>
</head>
<body bgcolor='white'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
<b>qthread_fork</b>, <b>qthread_fork_precond</b>, <b>qthread_fork_syncvar</b>, <b>qthread_fork_to</b>,
<b>qthread_fork_to_precond</b>, <b>qthread_fork_syncvar_to</b> - spawn a qthread 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>#include
&lt;qthread.h&gt;</b> 
<p> <i>int</i> <br>
<b>qthread_fork</b> (qthread_f <i>f</i>, const void *<i>arg</i>, aligned_t *<i>ret</i>);<i></i> <p>
<i>int</i> <br>
<b>qthread_fork_precond</b> (qthread_f <i>f</i>, const void *<i>arg</i>, <i></i>  aligned_t *<i>ret</i>, int
<i>npreconds</i>, ...);<i></i> <p>
<i>int</i> <br>
<b>qthread_fork_syncvar</b> (qthread_f <i>f</i>, const void *<i>arg</i>,<i></i>  syncvar_t *<i>ret</i>);<i></i> <p>
<i>int</i>
<br>
<b>qthread_fork_to</b> (qthread_f <i>f</i>, const void *<i>arg</i>, aligned_t *<i>ret</i>,<i></i>  qthread_shepherd_id_t
<i>shepherd</i>);<i></i> <p>
<i>int</i> <br>
<b>qthread_fork_precond_to</b> (qthread_f <i>f</i>, const void *<i>arg</i>,<i></i>  aligned_t *<i>ret</i>,
<i></i>  qthread_shepherd_id_t <i>shepherd</i>,<i></i>  int <i>npreconds</i>, ...);<i></i> <p>
<i>int</i> <br>
<b>qthread_fork_syncvar_to</b> (qthread_f <i>f</i>, const void *<i>arg</i>,<i></i>  syncvar_t *<i>ret</i>,<i></i>
 qthread_shepherd_id_t <i>shepherd</i>);<i></i> 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
These are the functions for
generating new qthreads. <p>
The first argument to these functions, <i>f</i>, is a
function that will be run to completion by the created qthread. The second
argument to these functions, <i>arg</i>, is an argument that will be passed to
the specified function. Finally, <i>ret</i> is a pointer to the location that the
return value of <i>f</i> will be placed into. <p>
The qthread_f function must have
a prototype like this: <blockquote><p>
aligned_t function(void *arg); </blockquote>
<p>
The <b>qthread_fork_to</b>(),
<b>qthread_fork_precond_to</b>(), and <b>qthread_fork_syncvar_to</b>() functions spawn
the qthread to a specific shepherd. <p>
The <b>qthread_fork_precond</b>() and <b>qthread_fork_precond_to</b>()
functions accept a list of precondition variables. The qthread will be created
only when all precondition variables are full. The <i>npreconds</i> argument specifies
how many variables are given in the varargs list. <p>
When a qthread is spawned,
it is immediately scheduled to be run, and may be executed by its shepherd
at any time. <p>
The return value of the function <i>f</i> will be placed into the
memory pointed to by <i>ret</i>, in accordance with the full-empty bits. When <b>qthread_fork</b>()
or <b>qthread_fork_to</b>() is called, <i>ret</i> will be emptied (as if it had been
passed to <b>qthread_empty</b>() or <b>qthread_syncvar_empty</b>()). When the function
<i>f</i> returns, the returned value will be stored into <i>ret</i> and <i>ret</i> will be filled.
The way to block until a function has finished is to use <b>qthread_readFF</b>()
or <b>qthread_syncvar_readFF</b>() on the <i>ret</i> pointer. 
<h2><a name='sect3' href='#toc3'>Environment</a></h2>
The operation
of these functions is modified by the following environment variables:

<dl>

<dt><b>QTHREAD_STACK_SIZE</b> </dt>
<dd>This variable specifies, in bytes, the size of the stacks
that will be created for each thread. Changes to this value during the course
of the program run are ignored; the value is only evaluated when <b>qthread_initialize</b>()
is run. </dd>
</dl>

<h2><a name='sect4' href='#toc4'>Return Value</a></h2>
On success, the thread is spawned and 0 is returned.
On error, a non-zero error code is returned. 
<h2><a name='sect5' href='#toc5'>Errors</a></h2>

<dl>

<dt><b>ENOMEM</b> </dt>
<dd>Not enough memory
could be allocated. </dd>
</dl>

<h2><a name='sect6' href='#toc6'>See Also</a></h2>
<a href='qthread_migrate_to.html'><b>qthread_migrate_to</b>(3)</a>
  <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Environment</a></li>
<li><a name='toc4' href='#sect4'>Return Value</a></li>
<li><a name='toc5' href='#sect5'>Errors</a></li>
<li><a name='toc6' href='#sect6'>See Also</a></li>
</ul>
</body>
</html>
